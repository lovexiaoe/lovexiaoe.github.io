---
title: paxos算法
published: false
category: 分布式
---

## 共识算法
### 问题 
假设有一组提议值的进程集合。共识算法保证在这一堆提出的值中，只有一个会被选中。如果没有值被提出，那么就没有值被选中，如果一个值已经
被选中，那么进程组就能获取并承认这个值。一个共识算法有如下要求：
1. 只有被提议的值才可能会被选中。
2. 有且只有一个值会被选中。
3. 只有一个值被选中后，一个进程才会获取并承认这个值。

在共识算法中，有3种角色，我们使用proposer，acceptor，learner来表示，一个进程可能会扮演着多个角色。我们这里假设：
1. 各个节点会记录信息。
2. 各个节点之间的消息传递可能会出现延迟，重复，丢失，但是消息不会被篡改。
### 值的选取 
最简单的选取值的方式就是只有一个acceptor的情况。这样Acceptor只需要选择它接受的第一个值即可。但是这种方式一旦Acceptor出现问题，
那么系统就无法工作。
那么我们就需要多个acceptor避免单点问题。acceptor集合中的每个acceptor读可能会选中一个值。当有**足够多**的acceptor选中一个值后，
我们认为这个值被选中了。那么什么是**足够多**呢？如过半数。那么集合中的过半数的两个子集之间必定会有交集，交集中的acceptor为公共成员，
如果一个acceptor最多只接收一个值的话，这样做是可以的。

在没有故障和消息丢失的情况下。假设单个proposer只提议一个值，我们想要选中一个值，就需要满足下列条件：
P1:一个Acceptor必须接受到达的第一个被提议的值。

